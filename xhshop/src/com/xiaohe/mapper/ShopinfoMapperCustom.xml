<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaohe.mapper.ShopinfoMapperCustom" >
	<!-- 定义sql片段 -->
	<sql id="query_items_where">
	<!--  使用动态sql，通过if判断，满足条件进行动态sql拼接-->
	<!--  商品查询条件通过ItemsQueryVo这个包装类的ItemsCutom属性进行传递-->
	<if test="shopinfoCustom!=null">
		<if test="shopinfoCustom.sname!=null and shopinfoCustom.sname!=''">
			shopinfo.Sname like '%${shopinfoCustom.sname}%'
		</if>
	</if>
	</sql>
	<delete id="deleteItemsByMoreId" parameterType="com.xiaohe.po.ShopinfoQueryVo">
	 delete from shopinfo where Sid in
		<!-- (?,?,?,?,?) -->
		<foreach collection="ids" open="(" close=")" item="id" separator=",">
			#{id}
		</foreach>
	</delete>
	
	
	
	<insert id="addItems" parameterType="com.xiaohe.po.ShopinfoCustom">
	
		insert into shopinfo(Sname,Sdetail,Sweight,Sprice,Snum,Simgpath,Stype,Sbrand,Sfactory,
		Sfaddress,Spronum,Sstanum,Sfacphone,Sproducedate,Squalitydate,Spacktype,Sstoremethod,Sml
		,Sdegree,Sobject,Sstatus,Spoint) values(#{sname},#{sdetail},#{sweight},#{sprice},#{snum},#{simgpath},#{stype},#{sbrand},#{sfactory},
		#{sfaddress},#{spronum},#{sstanum},#{sfacphone},#{sproducedate},#{squalitydate},#{spacktype},#{sstoremethod},#{sml}
		,#{sdegree},#{sobject},#{sstatus},#{spoint})
	
	</insert>

	<select id="queryAllItems" resultType="com.xiaohe.po.ShopinfoCustom">
	
		select * from shopinfo
	
	</select>
	
	<select id="searchItems" parameterType="com.xiaohe.po.ShopinfoQueryVo" resultType="com.xiaohe.po.ShopinfoCustom">
	
		select shopinfo.* from shopinfo
  		<where>
  			 <include refid="query_items_where"></include>
  		
  		</where>
  	</select>
	
	<select id="queryItemsByType" parameterType="com.xiaohe.po.ShopinfoQueryVo"  resultType="com.xiaohe.po.ShopinfoCustom">
		
		select shopinfo.* from shopinfo where Stype=#{shopinfoCustom.stype}
		
	</select>
	
	<select id="queryItemsByPriceSize"  resultType="com.xiaohe.po.ShopinfoCustom">
		select * from shopinfo order by Sprice desc
	
	</select>	
	
	<select id="queryItemsByPriceSize2" resultType="com.xiaohe.po.ShopinfoCustom">
		select * from shopinfo order by Sprice 
	
	</select>
	
	
	 <select id="queryItemsByBetweenSize" parameterType="com.xiaohe.po.ShopinfoQueryVo" resultType="com.xiaohe.po.ShopinfoCustom">
		
		select * from shopinfo where Sprice &lt;= #{right}  AND  Sprice &gt;= #{left}
	
	</select> 
	
	
	<!-- <select id="queryType" parameterType="com.xiaohe.po.ShopinfoCustom" resultType="com.xiaohe.po.ShopinfoCustom">
		select Stype from shopinfo where Stype=#{stype}
	
	</select> -->
		<select id="queryItemsAllCount" resultType="int" >
	
		select count(*) from shopinfo
	</select>
	
</mapper>